<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¤©æ°”æé†’ç³»ç»Ÿ (Weather Reminder)</title>
    <style>
        /* é¡µé¢åŸºç¡€æ ·å¼ */
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f0f4f8; margin: 0; padding: 20px; color: #333; }
        .container { max-width: 800px; margin: 0 auto; background: #ffffff; padding: 25px; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.05); }
        h1 { text-align: center; color: #2c3e50; }
        
        /* è¡¨å•æ ·å¼ */
        .form-section { background-color: #f8fafc; padding: 20px; border-radius: 8px; margin-bottom: 25px; border: 1px solid #e2e8f0; }
        .form-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; font-weight: bold; color: #4a5568; }
        input[type="text"], input[type="email"], input[type="time"] { 
            width: 100%; padding: 10px; box-sizing: border-box; border: 1px solid #cbd5e0; border-radius: 6px; font-size: 14px;
        }
        input:focus { outline: none; border-color: #3182ce; box-shadow: 0 0 0 2px rgba(49, 130, 206, 0.2); }
        button { background-color: #3182ce; color: white; border: none; padding: 10px 20px; border-radius: 6px; cursor: pointer; font-size: 16px; width: 100%; font-weight: bold;}
        button:hover { background-color: #2b6cb0; }
        
        /* è¡¨æ ¼æ ·å¼ */
        table { width: 100%; border-collapse: collapse; margin-top: 10px; }
        th, td { padding: 12px 15px; border-bottom: 1px solid #e2e8f0; text-align: left; }
        th { background-color: #edf2f7; color: #4a5568; }
        tr:hover { background-color: #f7fafc; }
        .delete-btn { background-color: #e53e3e; padding: 6px 12px; font-size: 14px; width: auto; }
        .delete-btn:hover { background-color: #c53030; }
    </style>
</head>
<body>

<div class="container">
    <h1>ğŸŒ¤ï¸ Haolong çš„å¤©æ°”æé†’æ§åˆ¶å°</h1>
    
    <!-- æ•°æ®å½•å…¥æ¨¡å— -->
    <div class="form-section">
        <h3>â• æ·»åŠ æ–°æé†’</h3>
        <form id="reminderForm">
            <div class="form-group">
                <label for="city">ç›®æ ‡åŸå¸‚ (City)</label>
                <input type="text" id="city" placeholder="ä¾‹å¦‚ï¼šåŒ—äº¬" required>
            </div>
            <div class="form-group">
                <label for="email">æ¥æ”¶é‚®ç®± (Email)</label>
                <input type="email" id="email" placeholder="ä¾‹å¦‚ï¼šuser@example.com" required>
            </div>
            <div class="form-group">
                <label for="time">æ¯æ—¥æé†’æ—¶é—´ (Time)</label>
                <input type="time" id="time" required>
            </div>
            <button type="submit">ä¿å­˜å¤©æ°”æé†’</button>
        </form>
    </div>

    <!-- æ•°æ®å±•ç¤ºæ¨¡å— -->
    <h3>ğŸ“‹ å·²ä¿å­˜çš„æé†’æ•°æ®</h3>
    <table id="dataTable">
        <thead>
            <tr>
                <th>ID</th>
                <th>åŸå¸‚</th>
                <th>æ¥æ”¶é‚®ç®±</th>
                <th>æé†’æ—¶é—´</th>
                <th>æ“ä½œ</th>
            </tr>
        </thead>
        <tbody>
            <!-- æ•°æ®å°†é€šè¿‡ JavaScript åŠ¨æ€å¡«å……åˆ°è¿™é‡Œ -->
        </tbody>
    </table>
</div>

<script>
    // ã€1ã€‘åˆå§‹åŒ–çš„æ¨¡æ‹Ÿæ•°æ® (å½“ä½ æœ‰äº†åç«¯åï¼Œè¿™é‡Œå¯ä»¥åˆå§‹åŒ–ä¸ºç©ºæ•°ç»„ [])
    let reminders =[
        { id: 1, city: 'åŒ—äº¬', email: 'haolong@example.com', time: '08:00' },
        { id: 2, city: 'ä¸Šæµ·', email: 'test@example.com', time: '07:30' }
    ];

    const tableBody = document.querySelector('#dataTable tbody');
    const form = document.getElementById('reminderForm');

    // ã€2ã€‘æ¸²æŸ“è¡¨æ ¼æ•°æ®çš„å‡½æ•°
    function renderTable() {
        tableBody.innerHTML = ''; // å…ˆæ¸…ç©ºè¡¨æ ¼å†…å®¹
        reminders.forEach(item => {
            const row = document.createElement('tr');
            row.innerHTML = `
                <td>${item.id}</td>
                <td>${item.city}</td>
                <td>${item.email}</td>
                <td>${item.time}</td>
                <td><button class="delete-btn" onclick="deleteData(${item.id})">åˆ é™¤</button></td>
            `;
            tableBody.appendChild(row);
        });
    }

    // ã€3ã€‘å¤„ç†è¡¨å•æäº¤ï¼ˆå¢åŠ æ•°æ®ï¼‰
    form.addEventListener('submit', function(e) {
        e.preventDefault(); // é˜»æ­¢é¡µé¢é»˜è®¤åˆ·æ–°è¡Œä¸º
        
        // è·å–è¾“å…¥æ¡†é‡Œçš„æ•°æ®
        const city = document.getElementById('city').value;
        const email = document.getElementById('email').value;
        const time = document.getElementById('time').value;

        // ç”Ÿæˆæ–°æ•°æ®å¯¹è±¡
        const newData = {
            id: reminders.length ? Math.max(...reminders.map(r => r.id)) + 1 : 1, // è‡ªåŠ¨ç”Ÿæˆæ–°ID
            city: city,
            email: email,
            time: time
        };

        /* 
        ========================================================
        å¦‚æœä½ éœ€è¦æŠŠæ•°æ®ä¼ ç»™ä½ çš„ Github é¡¹ç›®åç«¯ï¼ˆä¾‹å¦‚ Node.js/Python APIï¼‰ï¼Œ
        è¯·å–æ¶ˆä¸‹é¢è¿™è¡Œä»£ç çš„æ³¨é‡Šï¼Œå¹¶ä¿®æ”¹ä¸ºä½ çš„çœŸå®æ¥å£åœ°å€ï¼š
        ========================================================
        
        fetch('http://localhost:8080/api/add-reminder', { 
            method: 'POST', 
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(newData) 
        }).then(response => response.json()).then(data => {
            console.log("åç«¯ä¿å­˜æˆåŠŸ", data);
        });
        */

        reminders.push(newData); // æœ¬åœ°æ•°æ®æ›´æ–°
        renderTable();           // åˆ·æ–°ç•Œé¢è¡¨æ ¼
        form.reset();            // æ¸…ç©ºè¾“å…¥æ¡†
    });

    // ã€4ã€‘å¤„ç†åˆ é™¤åŠŸèƒ½
    function deleteData(id) {
        /*
        åŒæ ·åœ°ï¼Œå¦‚æœéœ€è¦å‘Šè¯‰ä½ çš„åç«¯åˆ é™¤è¿™æ¡æ•°æ®ï¼š
        fetch(`http://localhost:8080/api/delete-reminder/${id}`, { method: 'DELETE' });
        */
        
        // ä»æ•°ç»„ä¸­è¿‡æ»¤æ‰è¢«åˆ é™¤çš„ ID
        reminders = reminders.filter(item => item.id !== id);
        renderTable(); // åˆ·æ–°è¡¨æ ¼
    }

    // ã€5ã€‘é¡µé¢åŠ è½½æ—¶é¦–å…ˆæ¸²æŸ“ä¸€æ¬¡æ•°æ®
    renderTable();

    /* 
    ========================================================
    å¦‚æœä½ æœ‰åç«¯ APIï¼Œé¡µé¢åŠ è½½æ—¶å¯ä»¥é€šè¿‡ä¸‹é¢çš„ä»£ç ä»åç«¯æ‹‰å–æ•°æ®ï¼š
    ========================================================
    fetch('http://localhost:8080/api/get-reminders')
        .then(response => response.json())
        .then(data => {
            reminders = data; // ç”¨åç«¯è·å–çš„æ•°æ®æ›¿æ¢æ‰æœ¬åœ°æµ‹è¯•æ•°æ®
            renderTable();    // é‡æ–°æ¸²æŸ“è¡¨æ ¼
        });
    */
</script>

</body>
</html>
