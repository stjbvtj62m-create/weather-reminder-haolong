<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¤©æ°”æé†’ç³»ç»Ÿ (Weather Reminder)</title>
    <style>
        /* é¡µé¢åŸºç¡€æ ·å¼ */
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f0f4f8; margin: 0; padding: 20px; color: #333; }
        .container { max-width: 800px; margin: 0 auto; background: #ffffff; padding: 25px; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.05); }
        h1 { text-align: center; color: #2c3e50; }
        
        /* è¡¨å•æ ·å¼ */
        .form-section { background-color: #f8fafc; padding: 20px; border-radius: 8px; margin-bottom: 25px; border: 1px solid #e2e8f0; }
        .form-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; font-weight: bold; color: #4a5568; }
        input[type="text"], input[type="email"], input[type="time"] { 
            width: 100%; padding: 10px; box-sizing: border-box; border: 1px solid #cbd5e0; border-radius: 6px; font-size: 14px;
        }
        input:focus { outline: none; border-color: #3182ce; box-shadow: 0 0 0 2px rgba(49, 130, 206, 0.2); }
        button { background-color: #3182ce; color: white; border: none; padding: 10px 20px; border-radius: 6px; cursor: pointer; font-size: 16px; width: 100%; font-weight: bold;}
        button:hover { background-color: #2b6cb0; }
        
        /* è¡¨æ ¼æ ·å¼ */
        table { width: 100%; border-collapse: collapse; margin-top: 10px; }
        th, td { padding: 12px 15px; border-bottom: 1px solid #e2e8f0; text-align: left; }
        th { background-color: #edf2f7; color: #4a5568; }
        tr:hover { background-color: #f7fafc; }
        .delete-btn { background-color: #e53e3e; padding: 6px 12px; font-size: 14px; width: auto; color: white; border: none; border-radius: 4px; cursor: pointer;}
        .delete-btn:hover { background-color: #c53030; }
        .loading { text-align: center; color: #718096; font-style: italic; }
    </style>
</head>
<body>

<div class="container">
    <h1>ğŸŒ¤ï¸ Haolong çš„å¤©æ°”æé†’æ§åˆ¶å°</h1>
    
    <!-- æ•°æ®å½•å…¥æ¨¡å— -->
    <div class="form-section">
        <h3>â• æ·»åŠ æ–°æé†’</h3>
        <form id="reminderForm">
            <div class="form-group">
                <label for="city">ç›®æ ‡åŸå¸‚ (City)</label>
                <input type="text" id="city" placeholder="ä¾‹å¦‚ï¼šåŒ—äº¬" required>
            </div>
            <div class="form-group">
                <label for="email">æ¥æ”¶é‚®ç®± (Email)</label>
                <input type="email" id="email" placeholder="ä¾‹å¦‚ï¼šuser@example.com" required>
            </div>
            <div class="form-group">
                <label for="time">æ¯æ—¥æé†’æ—¶é—´ (Time)</label>
                <input type="time" id="time" required>
            </div>
            <button type="submit">ä¸´æ—¶æ·»åŠ æé†’</button>
        </form>
    </div>

    <!-- æ•°æ®å±•ç¤ºæ¨¡å— -->
    <h3>ğŸ“‹ å·²ä¿å­˜çš„æé†’æ•°æ®</h3>
    <table id="dataTable">
        <thead>
            <tr>
                <th>ID</th>
                <th>åŸå¸‚</th>
                <th>æ¥æ”¶é‚®ç®±</th>
                <th>æé†’æ—¶é—´</th>
                <th>æ“ä½œ</th>
            </tr>
        </thead>
        <tbody>
            <tr><td colspan="5" class="loading">æ­£åœ¨åŠ è½½æ•°æ®ä¸­...</td></tr>
        </tbody>
    </table>
</div>

<script>
    // ã€1ã€‘å£°æ˜ä¸€ä¸ªç©ºæ•°ç»„ï¼Œå‡†å¤‡æ¥æ”¶å¤–éƒ¨æ•°æ®
    let reminders =[];
    const tableBody = document.querySelector('#dataTable tbody');
    const form = document.getElementById('reminderForm');

    // ã€2ã€‘æ¸²æŸ“è¡¨æ ¼æ•°æ®çš„å‡½æ•°
    function renderTable() {
        tableBody.innerHTML = ''; // æ¸…ç©ºåŠ è½½æç¤ºæˆ–æ—§æ•°æ®
        
        if (reminders.length === 0) {
            tableBody.innerHTML = '<tr><td colspan="5" class="loading">æš‚æ— æ•°æ®</td></tr>';
            return;
        }

        reminders.forEach(item => {
            const row = document.createElement('tr');
            row.innerHTML = `
                <td>${item.id}</td>
                <td>${item.city}</td>
                <td>${item.email}</td>
                <td>${item.time}</td>
                <td><button class="delete-btn" onclick="deleteData(${item.id})">åˆ é™¤</button></td>
            `;
            tableBody.appendChild(row);
        });
    }

    // ã€3ã€‘æ ¸å¿ƒï¼šä» data.json è¯»å–æ•°æ®
    // è¿™å°±å®ç°äº†ä»é™æ€æ–‡ä»¶â€œè®¿é—®æ•°æ®â€çš„åŠŸèƒ½
    function loadData() {
        fetch('data.json')
            .then(response => {
                if (!response.ok) {
                    throw new Error('æ‰¾ä¸åˆ° data.json æ–‡ä»¶');
                }
                return response.json();
            })
            .then(data => {
                reminders = data; // å°†è¯»å–åˆ°çš„æ•°æ®èµ‹å€¼ç»™å˜é‡
                renderTable();    // æ¸²æŸ“åˆ°é¡µé¢ä¸Š
            })
            .catch(error => {
                console.error('è·å–æ•°æ®å¤±è´¥:', error);
                tableBody.innerHTML = `<tr><td colspan="5" class="loading" style="color: red;">æ•°æ®åŠ è½½å¤±è´¥ï¼Œè¯·ç¡®ä¿åŒç›®å½•ä¸‹å­˜åœ¨ data.json</td></tr>`;
            });
    }

    // ã€4ã€‘å¤„ç†è¡¨å•æäº¤ï¼ˆæ³¨ï¼šGitHub Pages ç¯å¢ƒä¸‹åªä¼šåœ¨é¡µé¢ä¸´æ—¶å¢åŠ ï¼Œåˆ·æ–°åæ¶ˆå¤±ï¼‰
    form.addEventListener('submit', function(e) {
        e.preventDefault(); 
        
        const city = document.getElementById('city').value;
        const email = document.getElementById('email').value;
        const time = document.getElementById('time').value;

        const newData = {
            id: reminders.length ? Math.max(...reminders.map(r => r.id)) + 1 : 1,
            city: city,
            email: email,
            time: time
        };

        reminders.push(newData); 
        renderTable();           
        form.reset();            
    });

    // ã€5ã€‘å¤„ç†åˆ é™¤åŠŸèƒ½ï¼ˆåŒæ ·åªæ˜¯é¡µé¢ä¸´æ—¶åˆ é™¤ï¼‰
    function deleteData(id) {
        reminders = reminders.filter(item => item.id !== id);
        renderTable(); 
    }

    // ã€6ã€‘é¡µé¢åŠ è½½æ—¶è§¦å‘æ•°æ®è¯·æ±‚
    loadData();

</script>

</body>
</html>
